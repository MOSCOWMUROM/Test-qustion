Для реализации задачи на Java я использую версию Java 17 и библиотеку для HTTP запросов HttpClient, доступную в Java 11 и выше. Также я использую библиотеку Jackson для сериализации и десериализации JSON.

# Описание реализации:
1. Конструктор CrptApi(TimeUnit timeUnit, int requestLimit):

⋅⋅1. Создается HTTP клиент и объект для сериализации JSON (ObjectMapper).
⋅⋅1. Настраивается периодический сброс счетчика запросов (requestCount) через определенные промежутки времени.
⋅⋅1. Параметры timeUnit и requestLimit определяют, сколько запросов можно сделать за определенный интервал времени.
2. Метод createDocument(Document document, String signature):

⋅⋅2. Метод синхронизирован для гарантии того, что несколько потоков не превысят лимит запросов.
⋅⋅2. Ждет, пока количество запросов не станет меньше лимита.
⋅⋅2. Подготавливает JSON тело запроса.
⋅⋅2. Отправляет POST запрос на указанный URL и проверяет ответ.
3. Внутренние классы Document, Description и Product:

⋅⋅3. Внутренние классы представляют структуру документа и его вложенные элементы. Это позволяет легко расширять функционал класса для поддержки дополнительных полей или типов документов.
#Примечания:
⋅⋅. Для работы с JSON используется библиотека Jackson. Чтобы этот пример работал, убедитесь, что у вас в зависимости добавлена библиотека com.fasterxml.jackson.core:jackson-databind.
⋅⋅. Для управления запросами используется ScheduledExecutorService, который сбрасывает счетчик запросов через указанный интервал времени, чтобы обеспечить соблюдение ограничения.
⋅⋅. Эта реализация ориентирована на потокобезопасность и корректное управление лимитом запросов.
